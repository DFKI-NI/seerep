
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../projects/">
      
      
        <link rel="next" href="../writing-python-examples/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Sending & querying images - SEEREP Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sending-querying-images" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SEEREP Documentation" class="md-header__button md-logo" aria-label="SEEREP Documentation" data-md-component="logo">
      
  <img src="../../imgs/DFKI_logo_outline_w.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SEEREP Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sending & querying images
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/agri-gaia/seerep" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../home/" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/client/pypi/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/packages/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SEEREP Documentation" class="md-nav__button md-logo" aria-label="SEEREP Documentation" data-md-component="logo">
      
  <img src="../../imgs/DFKI_logo_outline_w.png" alt="logo">

    </a>
    SEEREP Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/agri-gaia/seerep" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Client
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Client
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/client/pypi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gRPC python
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/installationDev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dev Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/kubernetes-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/local-deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/server/tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/packages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Package Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/python-helpers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python helper functionality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pytests-message-abstractions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python tests message abstractions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating & retrieving projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Sending & querying images
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Sending & querying images
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sending-images" class="md-nav__link">
    <span class="md-ellipsis">
      Sending images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-images" class="md-nav__link">
    <span class="md-ellipsis">
      Query images
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2d-polygon-spatial-query" class="md-nav__link">
    <span class="md-ellipsis">
      2D Polygon (spatial query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-time-interval-temporal-query" class="md-nav__link">
    <span class="md-ellipsis">
      A time interval (temporal query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labels-semantic-query" class="md-nav__link">
    <span class="md-ellipsis">
      Labels (semantic query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projectuuids" class="md-nav__link">
    <span class="md-ellipsis">
      ProjectUuids
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#withoutdata" class="md-nav__link">
    <span class="md-ellipsis">
      WithoutData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inmapframe" class="md-nav__link">
    <span class="md-ellipsis">
      InMapFrame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-code-for-querying-images" class="md-nav__link">
    <span class="md-ellipsis">
      Example code for querying images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing-python-examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing python examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../writing-python-tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing python integration tests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sending-images" class="md-nav__link">
    <span class="md-ellipsis">
      Sending images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-images" class="md-nav__link">
    <span class="md-ellipsis">
      Query images
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2d-polygon-spatial-query" class="md-nav__link">
    <span class="md-ellipsis">
      2D Polygon (spatial query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-time-interval-temporal-query" class="md-nav__link">
    <span class="md-ellipsis">
      A time interval (temporal query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labels-semantic-query" class="md-nav__link">
    <span class="md-ellipsis">
      Labels (semantic query)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projectuuids" class="md-nav__link">
    <span class="md-ellipsis">
      ProjectUuids
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#withoutdata" class="md-nav__link">
    <span class="md-ellipsis">
      WithoutData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inmapframe" class="md-nav__link">
    <span class="md-ellipsis">
      InMapFrame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-code-for-querying-images" class="md-nav__link">
    <span class="md-ellipsis">
      Example code for querying images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="sending-querying-images">Sending &amp; querying images</h1>
<h2 id="sending-images">Sending images</h2>
<p>In this example we will send images with labeled bounding boxes as well as general labels to SEEREP.</p>
<p>In order to save images, we need to mandatorily provide the intrinsics of the camera used to capture them.
After the successfully saving the camera intrinsics, we need to provide the uuid of it along with the images.
SEEREP will ensure that the Camera Intrinsics UUID provided with an image has a UUID stored against it.</p>
<p>Additionally we add some coordinate transformations at the end.</p>
<p>Source: <a href="https://github.com/agri-gaia/seerep/blob/main/examples/python/gRPC/images/gRPC_pb_sendLabeledImage.py">examples/python/gRPC/images/gRPC_pb_sendLabeledImage.py</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1"># NOTE: This file is referenced in the following mkdocs files:</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">#   images.md</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># Any changes done in here will be reflected in there</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kn">import</span> <span class="nn">uuid</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="kn">from</span> <span class="nn">google.protobuf</span> <span class="kn">import</span> <span class="n">empty_pb2</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="kn">from</span> <span class="nn">grpc</span> <span class="kn">import</span> <span class="n">Channel</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">boundingbox2d_labeled_pb2</span> <span class="k">as</span> <span class="n">boundingbox2d_labeled</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">boundingbox2d_labeled_with_category_pb2</span> <span class="k">as</span> <span class="n">boundingbox2d_labeled_with_category</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">camera_intrinsics_pb2</span> <span class="k">as</span> <span class="n">cameraintrinsics</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">camera_intrinsics_service_pb2_grpc</span> <span class="k">as</span> <span class="n">camintrinsics_service</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">image_pb2</span> <span class="k">as</span> <span class="n">image</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">image_service_pb2_grpc</span> <span class="k">as</span> <span class="n">imageService</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">label_with_instance_pb2</span> <span class="k">as</span> <span class="n">labelWithInstance</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">labels_with_instance_with_category_pb2</span> <span class="k">as</span> <span class="n">labels_with_instance_with_category</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">meta_operations_pb2_grpc</span> <span class="k">as</span> <span class="n">metaOperations</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">projectCreation_pb2</span> <span class="k">as</span> <span class="n">projectCreation</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">tf_service_pb2_grpc</span> <span class="k">as</span> <span class="n">tfService</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">transform_stamped_pb2</span> <span class="k">as</span> <span class="n">tf</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="kn">from</span> <span class="nn">seerep.util.common</span> <span class="kn">import</span> <span class="n">get_gRPC_channel</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="k">def</span> <span class="nf">send_labeled_images</span><span class="p">(</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>    <span class="n">target_proj_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">grpc_channel</span><span class="p">:</span> <span class="n">Channel</span> <span class="o">=</span> <span class="n">get_gRPC_channel</span><span class="p">()</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">cameraintrinsics</span><span class="o">.</span><span class="n">CameraIntrinsics</span><span class="p">]:</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;sends test images via the given grpc_channel to the specified target project uuid&quot;&quot;&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>    <span class="c1"># 1. Get gRPC service objects</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>    <span class="n">stub</span> <span class="o">=</span> <span class="n">imageService</span><span class="o">.</span><span class="n">ImageServiceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>    <span class="n">stubTf</span> <span class="o">=</span> <span class="n">tfService</span><span class="o">.</span><span class="n">TfServiceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>    <span class="n">stubMeta</span> <span class="o">=</span> <span class="n">metaOperations</span><span class="o">.</span><span class="n">MetaOperationsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>    <span class="n">stubCI</span> <span class="o">=</span> <span class="n">camintrinsics_service</span><span class="o">.</span><span class="n">CameraIntrinsicsServiceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>    <span class="c1"># 2. Check if we have an existing test project (or target_proj_uuid is set), if not, one is created.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>    <span class="k">if</span> <span class="n">target_proj_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>        <span class="c1"># 3. Get all projects from the server</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">stubMeta</span><span class="o">.</span><span class="n">GetProjects</span><span class="p">(</span><span class="n">empty_pb2</span><span class="o">.</span><span class="n">Empty</span><span class="p">())</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>        <span class="k">for</span> <span class="n">project</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">projects</span><span class="p">:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">project</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>            <span class="k">if</span> <span class="n">project</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;testproject&quot;</span><span class="p">:</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>                <span class="n">target_proj_uuid</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">uuid</span>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>        <span class="k">if</span> <span class="n">target_proj_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>            <span class="c1"># 4. create a project</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>            <span class="n">creation</span> <span class="o">=</span> <span class="n">projectCreation</span><span class="o">.</span><span class="n">ProjectCreation</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;testproject&quot;</span><span class="p">,</span> <span class="n">mapFrameId</span><span class="o">=</span><span class="s2">&quot;map&quot;</span><span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>            <span class="n">projectCreated</span> <span class="o">=</span> <span class="n">stubMeta</span><span class="o">.</span><span class="n">CreateProject</span><span class="p">(</span><span class="n">creation</span><span class="p">)</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>            <span class="n">target_proj_uuid</span> <span class="o">=</span> <span class="n">projectCreated</span><span class="o">.</span><span class="n">uuid</span>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>    <span class="n">theTime</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>    <span class="c1">#####</span>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>    <span class="c1"># A valid camera intrinsics UUID is needed here for succesful storage of Images</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>    <span class="c1"># Add new Camera Intrinsics with placeholder data</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>    <span class="n">ciuuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>    <span class="n">camin</span> <span class="o">=</span> <span class="n">cameraintrinsics</span><span class="o">.</span><span class="n">CameraIntrinsics</span><span class="p">()</span>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">3</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s2">&quot;camintrinsics&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">uuid_project</span> <span class="o">=</span> <span class="n">target_proj_uuid</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">uuid_msgs</span> <span class="o">=</span> <span class="n">ciuuid</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">region_of_interest</span><span class="o">.</span><span class="n">x_offset</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">region_of_interest</span><span class="o">.</span><span class="n">y_offset</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">region_of_interest</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">region_of_interest</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">region_of_interest</span><span class="o">.</span><span class="n">do_rectify</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">distortion_model</span> <span class="o">=</span> <span class="s2">&quot;plumb_bob&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">distortion</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">intrinsic_matrix</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">])</span>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">rectification_matrix</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">])</span>
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">projection_matrix</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">binning_x</span> <span class="o">=</span> <span class="mi">6</span>
<a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">binning_y</span> <span class="o">=</span> <span class="mi">7</span>
<a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>    <span class="n">camin</span><span class="o">.</span><span class="n">maximum_viewing_distance</span> <span class="o">=</span> <span class="mi">5</span>
<a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>    <span class="n">stubCI</span><span class="o">.</span><span class="n">TransferCameraIntrinsics</span><span class="p">(</span><span class="n">camin</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>
<a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>    <span class="c1"># 5. Create ten images</span>
<a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>    <span class="c1"># for debugging and testing this example add all sent images to a list</span>
<a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>    <span class="n">sent_images_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a>    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>        <span class="n">theImage</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">()</span>
<a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>        <span class="n">rgb</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a>        <span class="n">lim</span> <span class="o">=</span> <span class="mi">256</span>  <span class="c1"># 256 x 256 pixels</span>
<a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lim</span><span class="p">):</span>
<a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lim</span><span class="p">):</span>
<a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="n">lim</span>
<a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a>                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">/</span> <span class="n">lim</span>
<a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>                <span class="n">z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">/</span> <span class="n">lim</span>
<a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a>                <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ubyte</span><span class="p">((</span><span class="n">x</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>                <span class="n">g</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ubyte</span><span class="p">((</span><span class="n">y</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a>                <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ubyte</span><span class="p">((</span><span class="n">z</span> <span class="o">*</span> <span class="mf">255.0</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="mi">255</span><span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>                <span class="n">rgb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a>                <span class="n">rgb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a>                <span class="n">rgb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a>        <span class="c1"># Add image meta-data</span>
<a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s2">&quot;camera&quot;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="n">theTime</span> <span class="o">+</span> <span class="n">n</span>
<a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">uuid_project</span> <span class="o">=</span> <span class="n">target_proj_uuid</span>
<a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">lim</span>
<a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">lim</span>
<a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;rgb8&quot;</span>
<a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">lim</span>
<a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">uuid_camera_intrinsics</span> <span class="o">=</span> <span class="n">ciuuid</span>
<a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a>        <span class="c1"># Add image data</span>
<a id="__codelineno-0-132" name="__codelineno-0-132" href="#__codelineno-0-132"></a>        <span class="n">theImage</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">rgb</span><span class="p">)</span>
<a id="__codelineno-0-133" name="__codelineno-0-133" href="#__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134" href="#__codelineno-0-134"></a>        <span class="c1"># 5. create categories for bounding boxes</span>
<a id="__codelineno-0-135" name="__codelineno-0-135" href="#__codelineno-0-135"></a>        <span class="k">for</span> <span class="n">iCategory</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-136" name="__codelineno-0-136" href="#__codelineno-0-136"></a>            <span class="n">bbCat</span> <span class="o">=</span> <span class="n">boundingbox2d_labeled_with_category</span><span class="o">.</span><span class="n">BoundingBox2DLabeledWithCategory</span><span class="p">()</span>
<a id="__codelineno-0-137" name="__codelineno-0-137" href="#__codelineno-0-137"></a>            <span class="n">bbCat</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iCategory</span><span class="p">)</span>
<a id="__codelineno-0-138" name="__codelineno-0-138" href="#__codelineno-0-138"></a>            <span class="c1"># 6. Create bounding boxes with labels with variations in the labels according to their index</span>
<a id="__codelineno-0-139" name="__codelineno-0-139" href="#__codelineno-0-139"></a>            <span class="n">bb</span> <span class="o">=</span> <span class="n">boundingbox2d_labeled</span><span class="o">.</span><span class="n">BoundingBox2DLabeled</span><span class="p">()</span>
<a id="__codelineno-0-140" name="__codelineno-0-140" href="#__codelineno-0-140"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-141" name="__codelineno-0-141" href="#__codelineno-0-141"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;testlabel&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142" href="#__codelineno-0-142"></a>                <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-143" name="__codelineno-0-143" href="#__codelineno-0-143"></a>                    <span class="n">bb</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;testlabel</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_&quot;</span>
<a id="__codelineno-0-144" name="__codelineno-0-144" href="#__codelineno-0-144"></a>                <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145" href="#__codelineno-0-145"></a>                    <span class="n">bb</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;testlabel0&quot;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146" href="#__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147" href="#__codelineno-0-147"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="mf">10.0</span>
<a id="__codelineno-0-148" name="__codelineno-0-148" href="#__codelineno-0-148"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">instanceUuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())</span>
<a id="__codelineno-0-149" name="__codelineno-0-149" href="#__codelineno-0-149"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">center_point</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">10</span>
<a id="__codelineno-0-150" name="__codelineno-0-150" href="#__codelineno-0-150"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">center_point</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.02</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">10</span>
<a id="__codelineno-0-151" name="__codelineno-0-151" href="#__codelineno-0-151"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">spatial_extent</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.03</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">10</span>
<a id="__codelineno-0-152" name="__codelineno-0-152" href="#__codelineno-0-152"></a>                <span class="n">bb</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">spatial_extent</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.04</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">10</span>
<a id="__codelineno-0-153" name="__codelineno-0-153" href="#__codelineno-0-153"></a>                <span class="n">bbCat</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bb</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154" href="#__codelineno-0-154"></a>            <span class="n">theImage</span><span class="o">.</span><span class="n">labels_bb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbCat</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155" href="#__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156" href="#__codelineno-0-156"></a>            <span class="c1"># # 7. Add general labels to the image (in the same way as to the bounding boxes)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157" href="#__codelineno-0-157"></a>            <span class="n">labelsCat</span> <span class="o">=</span> <span class="n">labels_with_instance_with_category</span><span class="o">.</span><span class="n">LabelsWithInstanceWithCategory</span><span class="p">()</span>
<a id="__codelineno-0-158" name="__codelineno-0-158" href="#__codelineno-0-158"></a>            <span class="n">labelsCat</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iCategory</span><span class="p">)</span>
<a id="__codelineno-0-159" name="__codelineno-0-159" href="#__codelineno-0-159"></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-0-160" name="__codelineno-0-160" href="#__codelineno-0-160"></a>                <span class="n">label</span> <span class="o">=</span> <span class="n">labelWithInstance</span><span class="o">.</span><span class="n">LabelWithInstance</span><span class="p">()</span>
<a id="__codelineno-0-161" name="__codelineno-0-161" href="#__codelineno-0-161"></a>                <span class="n">label</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;testlabelgeneral&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162" href="#__codelineno-0-162"></a>                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-163" name="__codelineno-0-163" href="#__codelineno-0-163"></a>                    <span class="n">label</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;testlabelgeneral</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_&quot;</span>
<a id="__codelineno-0-164" name="__codelineno-0-164" href="#__codelineno-0-164"></a>                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165" href="#__codelineno-0-165"></a>                    <span class="n">label</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;testlabelgeneral</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_&quot;</span>
<a id="__codelineno-0-166" name="__codelineno-0-166" href="#__codelineno-0-166"></a>
<a id="__codelineno-0-167" name="__codelineno-0-167" href="#__codelineno-0-167"></a>                <span class="n">label</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">confidence</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="mf">10.0</span>
<a id="__codelineno-0-168" name="__codelineno-0-168" href="#__codelineno-0-168"></a>                <span class="c1"># assuming that that the general labels are not instance related -&gt; no instance uuid</span>
<a id="__codelineno-0-169" name="__codelineno-0-169" href="#__codelineno-0-169"></a>                <span class="c1"># label.instanceUuid = str(uuid.uuid4())</span>
<a id="__codelineno-0-170" name="__codelineno-0-170" href="#__codelineno-0-170"></a>                <span class="n">labelsCat</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<a id="__codelineno-0-171" name="__codelineno-0-171" href="#__codelineno-0-171"></a>            <span class="n">theImage</span><span class="o">.</span><span class="n">labels_general</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">labelsCat</span><span class="p">)</span>
<a id="__codelineno-0-172" name="__codelineno-0-172" href="#__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173" href="#__codelineno-0-173"></a>        <span class="c1"># 8. Send image to the server</span>
<a id="__codelineno-0-174" name="__codelineno-0-174" href="#__codelineno-0-174"></a>        <span class="n">uuidImg</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="n">TransferImage</span><span class="p">(</span><span class="n">theImage</span><span class="p">)</span>
<a id="__codelineno-0-175" name="__codelineno-0-175" href="#__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176" href="#__codelineno-0-176"></a>        <span class="c1"># also add them to the list</span>
<a id="__codelineno-0-177" name="__codelineno-0-177" href="#__codelineno-0-177"></a>        <span class="n">sent_images_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">uuidImg</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">theImage</span><span class="p">))</span>
<a id="__codelineno-0-178" name="__codelineno-0-178" href="#__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179" href="#__codelineno-0-179"></a>    <span class="c1"># a list for debugging and testing, if interpolated coordinates</span>
<a id="__codelineno-0-180" name="__codelineno-0-180" href="#__codelineno-0-180"></a>    <span class="c1"># according to timestamp of the images and tfs are correct</span>
<a id="__codelineno-0-181" name="__codelineno-0-181" href="#__codelineno-0-181"></a>    <span class="n">tf_times</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-182" name="__codelineno-0-182" href="#__codelineno-0-182"></a>
<a id="__codelineno-0-183" name="__codelineno-0-183" href="#__codelineno-0-183"></a>    <span class="c1"># 8. Add coordinate transformations and send them to the server</span>
<a id="__codelineno-0-184" name="__codelineno-0-184" href="#__codelineno-0-184"></a>    <span class="n">theTf</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformStamped</span><span class="p">()</span>
<a id="__codelineno-0-185" name="__codelineno-0-185" href="#__codelineno-0-185"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">frame_id</span> <span class="o">=</span> <span class="s2">&quot;map&quot;</span>
<a id="__codelineno-0-186" name="__codelineno-0-186" href="#__codelineno-0-186"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="n">theTime</span>
<a id="__codelineno-0-187" name="__codelineno-0-187" href="#__codelineno-0-187"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">uuid_project</span> <span class="o">=</span> <span class="n">target_proj_uuid</span>
<a id="__codelineno-0-188" name="__codelineno-0-188" href="#__codelineno-0-188"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">child_frame_id</span> <span class="o">=</span> <span class="s2">&quot;camera&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189" href="#__codelineno-0-189"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-190" name="__codelineno-0-190" href="#__codelineno-0-190"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-191" name="__codelineno-0-191" href="#__codelineno-0-191"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">3</span>
<a id="__codelineno-0-192" name="__codelineno-0-192" href="#__codelineno-0-192"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-193" name="__codelineno-0-193" href="#__codelineno-0-193"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-194" name="__codelineno-0-194" href="#__codelineno-0-194"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-195" name="__codelineno-0-195" href="#__codelineno-0-195"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotation</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-196" name="__codelineno-0-196" href="#__codelineno-0-196"></a>    <span class="n">stubTf</span><span class="o">.</span><span class="n">TransferTransformStamped</span><span class="p">(</span><span class="n">theTf</span><span class="p">)</span>
<a id="__codelineno-0-197" name="__codelineno-0-197" href="#__codelineno-0-197"></a>    <span class="n">tf_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198" href="#__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199" href="#__codelineno-0-199"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="n">theTime</span> <span class="o">+</span> <span class="mi">10</span>
<a id="__codelineno-0-200" name="__codelineno-0-200" href="#__codelineno-0-200"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-0-201" name="__codelineno-0-201" href="#__codelineno-0-201"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">200</span>
<a id="__codelineno-0-202" name="__codelineno-0-202" href="#__codelineno-0-202"></a>    <span class="n">theTf</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translation</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">300</span>
<a id="__codelineno-0-203" name="__codelineno-0-203" href="#__codelineno-0-203"></a>    <span class="n">stubTf</span><span class="o">.</span><span class="n">TransferTransformStamped</span><span class="p">(</span><span class="n">theTf</span><span class="p">)</span>
<a id="__codelineno-0-204" name="__codelineno-0-204" href="#__codelineno-0-204"></a>    <span class="n">tf_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theTf</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">stamp</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
<a id="__codelineno-0-205" name="__codelineno-0-205" href="#__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206" href="#__codelineno-0-206"></a>    <span class="c1"># return sent data</span>
<a id="__codelineno-0-207" name="__codelineno-0-207" href="#__codelineno-0-207"></a>    <span class="k">return</span> <span class="n">sent_images_list</span><span class="p">,</span> <span class="n">tf_times</span><span class="p">,</span> <span class="n">camin</span>
<a id="__codelineno-0-208" name="__codelineno-0-208" href="#__codelineno-0-208"></a>
<a id="__codelineno-0-209" name="__codelineno-0-209" href="#__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210" href="#__codelineno-0-210"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211" href="#__codelineno-0-211"></a>    <span class="n">sent_image_ls_data</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">send_labeled_images</span><span class="p">()</span>
<a id="__codelineno-0-212" name="__codelineno-0-212" href="#__codelineno-0-212"></a>    <span class="n">camera_intrinsics_allimgs</span> <span class="o">=</span> <span class="p">{</span><span class="n">intrins_uuid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uuid_camera_intrinsics</span> <span class="k">for</span> <span class="n">intrins_uuid</span> <span class="ow">in</span> <span class="n">sent_image_ls_data</span><span class="p">}</span>
<a id="__codelineno-0-213" name="__codelineno-0-213" href="#__codelineno-0-213"></a>
<a id="__codelineno-0-214" name="__codelineno-0-214" href="#__codelineno-0-214"></a>    <span class="c1"># print statement to seperate the messages of the function</span>
<a id="__codelineno-0-215" name="__codelineno-0-215" href="#__codelineno-0-215"></a>    <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-0-216" name="__codelineno-0-216" href="#__codelineno-0-216"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;camera intrinsics will be saved against the uuid(s): </span><span class="si">{</span><span class="n">camera_intrinsics_allimgs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-217" name="__codelineno-0-217" href="#__codelineno-0-217"></a>    <span class="n">img_uuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">img</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">sent_image_ls_data</span><span class="p">]</span>
<a id="__codelineno-0-218" name="__codelineno-0-218" href="#__codelineno-0-218"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">img_uuid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">img_uuids</span><span class="p">):</span>
<a id="__codelineno-0-219" name="__codelineno-0-219" href="#__codelineno-0-219"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;the uuid of the sent image number </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> is: </span><span class="si">{</span><span class="n">img_uuid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>testproject 28600b43-6385-4693-b617-c6209d9bde87
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>testproject 2292aa91-c369-4cb2-9de8-6987218fe268
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>camera intrinsics will be saved against the uuid(s): {&#39;085a41c6-b81c-4a8e-a16c-fb71d99b0ffe&#39;}
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>the uuid of the sent image number 0 is: 6821ea73-c9ca-45b3-97da-727ebe46cde5
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>the uuid of the sent image number 1 is: 1d5d2714-f9d3-45a5-b0fd-a45483057bd1
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>the uuid of the sent image number 2 is: 11251495-64d2-48be-8b3b-7ad06d360f02
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>the uuid of the sent image number 3 is: 2a2d8b62-3eb5-4bd8-aeeb-e8a4eab64322
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>the uuid of the sent image number 4 is: baadd923-b2ea-484c-9794-58788ce79980
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>the uuid of the sent image number 5 is: bdc82995-d827-41b3-9fd8-433e79dbced6
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>the uuid of the sent image number 6 is: 7678649c-39c9-4553-952e-cd93ed8ed675
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>the uuid of the sent image number 7 is: 1e5ff01d-ef2a-44e1-9af8-99496d9ecc2a
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>the uuid of the sent image number 8 is: c42b98ad-d92c-4b0c-9ea5-d6e6d4cff6e8
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>the uuid of the sent image number 9 is: b9619d15-5421-47db-a08b-ffb9f5cc8f3e
</code></pre></div>
<h2 id="query-images">Query images</h2>
<p>Now we will query the previously send images with some criteria. Possible query parameters are:</p>
<h3 id="2d-polygon-spatial-query">2D Polygon (spatial query)</h3>
<p>Spatial queries in SEEREP are performed using a 2D polygon. This polygon should be simple (no more than 2
vertices on the same edge) and convex (no edges curving inward).
This 2D polygon lies on a interval on the z-axis defined through a z-coordinate point and a height value.
Queries are performed by forming an encompassing axis aligned bounding box from the polygon.
This can lead to an AABB larger than the polygon and poses the potential problem of returning results to the
user which are not fully inside the query polygon.
That problem is resolved by providing a boolean variable called
fullyEncapsulated`.
If false, resultant polygons, which are partially inside the query polygon are also returned.</p>
<h3 id="a-time-interval-temporal-query">A time interval (temporal query)</h3>
<p>Temporal queries in SEEREP are performed using a time interval.
When using image queries the stamp in the <code>header</code> of those images is used and when that time
lies in the interval the image is returned as part of the response.
The interval is closed.</p>
<h3 id="labels-semantic-query">Labels (semantic query)</h3>
<h3 id="projectuuids">ProjectUuids</h3>
<p>Only performs the query in these included projects specified by their uuids.</p>
<h3 id="withoutdata">WithoutData</h3>
<p>If the pixel data of the image should not be returned in order to save bandwith.</p>
<h3 id="inmapframe">InMapFrame</h3>
<p>Whether the query is done in the map frame.
If not, the provided polygon for the spatial query will be transformed from the geodesic coordinates of the project
into the map frame beforehand.</p>
<h3 id="example-code-for-querying-images">Example code for querying images</h3>
<!-- markdownlint-disable -->

<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Flatbuffers</label><label for="__tabbed_1_2">Protocol Buffers</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Source: <a href="https://github.com/agri-gaia/seerep/blob/main/examples/python/gRPC/images/gRPC_fb_queryImage.py">examples/python/gRPC/images/gRPC_fb_queryImage.py</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1"># NOTE: This file is referenced in the following mkdocs files:</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">#   images.md</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Any changes done in here will be reflected in there</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="kn">import</span> <span class="nn">flatbuffers</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="kn">from</span> <span class="nn">grpc</span> <span class="kn">import</span> <span class="n">Channel</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="kn">from</span> <span class="nn">seerep.fb</span> <span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="kn">from</span> <span class="nn">seerep.fb</span> <span class="kn">import</span> <span class="n">image_service_grpc_fb</span> <span class="k">as</span> <span class="n">imageService</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="kn">from</span> <span class="nn">seerep.util.common</span> <span class="kn">import</span> <span class="n">get_gRPC_channel</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="kn">from</span> <span class="nn">seerep.util.fb_helper</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    <span class="n">createLabelWithCategory</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    <span class="n">createLabelWithConfidence</span><span class="p">,</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    <span class="n">createPoint2d</span><span class="p">,</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>    <span class="n">createPolygon2D</span><span class="p">,</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    <span class="n">createQuery</span><span class="p">,</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    <span class="n">createTimeInterval</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>    <span class="n">createTimeStamp</span><span class="p">,</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>    <span class="n">getProject</span><span class="p">,</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="p">)</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="k">def</span> <span class="nf">query_images_raw</span><span class="p">(</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>    <span class="n">target_proj_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">grpc_channel</span><span class="p">:</span> <span class="n">Channel</span> <span class="o">=</span> <span class="n">get_gRPC_channel</span><span class="p">()</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytearray</span><span class="p">]:</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>    <span class="n">builder</span> <span class="o">=</span> <span class="n">flatbuffers</span><span class="o">.</span><span class="n">Builder</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>    <span class="k">if</span> <span class="n">target_proj_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>        <span class="c1"># 1. Get all projects from the server</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>        <span class="n">target_proj_uuid</span> <span class="o">=</span> <span class="n">getProject</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="n">grpc_channel</span><span class="p">,</span> <span class="s2">&quot;testproject&quot;</span><span class="p">)</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>        <span class="c1"># 2. Check if the defined project exist, else return None</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>        <span class="k">if</span> <span class="n">target_proj_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;valid project doesn&#39;t exist! Please execute gRPC_fb_addCameraIntrinsics.py beforehand.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a>    <span class="c1"># 3. Get gRPC service object</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a>    <span class="n">stub</span> <span class="o">=</span> <span class="n">imageService</span><span class="o">.</span><span class="n">ImageServiceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a>    <span class="c1"># Create all necessary objects for the query</span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a>    <span class="n">scale</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>    <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a>        <span class="n">createPoint2d</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">scale</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)]</span>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a>    <span class="p">]</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a>    <span class="n">polygon2d</span> <span class="o">=</span> <span class="n">createPolygon2D</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a>    <span class="c1"># ruff: noqa: F841</span>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a>    <span class="n">timeMin</span> <span class="o">=</span> <span class="n">createTimeStamp</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="mi">1610549273</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a>    <span class="n">timeMax</span> <span class="o">=</span> <span class="n">createTimeStamp</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="mi">1938549273</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a>    <span class="n">timeInterval</span> <span class="o">=</span> <span class="n">createTimeInterval</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="n">timeMin</span><span class="p">,</span> <span class="n">timeMax</span><span class="p">)</span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a>
<a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a>    <span class="n">projectUuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">builder</span><span class="o">.</span><span class="n">CreateString</span><span class="p">(</span><span class="n">target_proj_uuid</span><span class="p">)]</span>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a>    <span class="c1"># list of categories</span>
<a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a>    <span class="n">category</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
<a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a>    <span class="c1"># list of labels per category</span>
<a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a>    <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a>        <span class="p">[</span>
<a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a>            <span class="n">createLabelWithConfidence</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="s2">&quot;testlabel0&quot;</span><span class="p">),</span>
<a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a>            <span class="n">createLabelWithConfidence</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="s2">&quot;testlabelgeneral0&quot;</span><span class="p">),</span>
<a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a>        <span class="p">]</span>
<a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a>    <span class="p">]</span>
<a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a>    <span class="n">labelCategory</span> <span class="o">=</span> <span class="n">createLabelWithCategory</span><span class="p">(</span><span class="n">builder</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
<a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a>    <span class="n">dataUuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">builder</span><span class="o">.</span><span class="n">CreateString</span><span class="p">(</span><span class="s2">&quot;3e12e18d-2d53-40bc-a8af-c5cca3c3b248&quot;</span><span class="p">)]</span>
<a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a>    <span class="n">instanceUuids</span> <span class="o">=</span> <span class="p">[</span><span class="n">builder</span><span class="o">.</span><span class="n">CreateString</span><span class="p">(</span><span class="s2">&quot;3e12e18d-2d53-40bc-a8af-c5cca3c3b248&quot;</span><span class="p">)]</span>
<a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a>
<a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a>    <span class="c1"># 4. Create a query with parameters</span>
<a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a>    <span class="c1"># All parameters are optional!</span>
<a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a>    <span class="c1"># With all parameters set (especially with the data and instance uuids set) the result of the query will be empty.</span>
<a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a>    <span class="c1"># Set the query parameters to adequate values or remove them from the query creation</span>
<a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">createQuery</span><span class="p">(</span>
<a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a>        <span class="n">builder</span><span class="p">,</span>
<a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a>        <span class="n">polygon2d</span><span class="o">=</span><span class="n">polygon2d</span><span class="p">,</span>
<a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a>        <span class="c1"># timeInterval=timeInterval,</span>
<a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a>        <span class="c1"># labels=labelCategory,</span>
<a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a>        <span class="c1"># mustHaveAllLabels=True,</span>
<a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a>        <span class="n">projectUuids</span><span class="o">=</span><span class="n">projectUuids</span><span class="p">,</span>
<a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a>        <span class="c1"># instanceUuids=instanceUuids,</span>
<a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a>        <span class="c1"># dataUuids=dataUuids,</span>
<a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a>        <span class="n">withoutData</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a>        <span class="n">fullyEncapsulated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a>        <span class="n">inMapFrame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a>    <span class="p">)</span>
<a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a>    <span class="n">builder</span><span class="o">.</span><span class="n">Finish</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a>    <span class="n">buf</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
<a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a>
<a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a>    <span class="c1"># 5. Query the server for images matching the query and iterate over them</span>
<a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a>    <span class="n">queried_images</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="n">GetImage</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
<a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a>
<a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a>    <span class="k">return</span> <span class="n">queried_images</span>
<a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a>
<a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a>
<a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a><span class="k">def</span> <span class="nf">query_images</span><span class="p">(</span>
<a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a>    <span class="n">target_proj_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">grpc_channel</span><span class="p">:</span> <span class="n">Channel</span> <span class="o">=</span> <span class="n">get_gRPC_channel</span><span class="p">()</span>
<a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="p">]:</span>
<a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">Image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">GetRootAs</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">query_images_raw</span><span class="p">(</span><span class="n">target_proj_uuid</span><span class="p">,</span> <span class="n">grpc_channel</span><span class="p">)]</span>
<a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a>
<a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a>
<a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a>    <span class="n">queried_images</span> <span class="o">=</span> <span class="n">query_images</span><span class="p">()</span>
<a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a>    <span class="k">if</span> <span class="n">queried_images</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;no images were queried&quot;</span><span class="p">)</span>
<a id="__codelineno-2-103" name="__codelineno-2-103" href="#__codelineno-2-103"></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<a id="__codelineno-2-104" name="__codelineno-2-104" href="#__codelineno-2-104"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;count of images: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">queried_images</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-105" name="__codelineno-2-105" href="#__codelineno-2-105"></a>
<a id="__codelineno-2-106" name="__codelineno-2-106" href="#__codelineno-2-106"></a>    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">queried_images</span><span class="p">:</span>
<a id="__codelineno-2-107" name="__codelineno-2-107" href="#__codelineno-2-107"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span><span class="p">)</span>
<a id="__codelineno-2-108" name="__codelineno-2-108" href="#__codelineno-2-108"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;uuidmsg: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span><span class="o">.</span><span class="n">UuidMsgs</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-109" name="__codelineno-2-109" href="#__codelineno-2-109"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;count of bounding box labels: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBbLength</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-110" name="__codelineno-2-110" href="#__codelineno-2-110"></a>        <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">LabelsBbLength</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-2-111" name="__codelineno-2-111" href="#__codelineno-2-111"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-2-112" name="__codelineno-2-112" href="#__codelineno-2-112"></a>                <span class="s2">&quot;first label: &quot;</span>
<a id="__codelineno-2-113" name="__codelineno-2-113" href="#__codelineno-2-113"></a>                <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">LabelWithInstance</span><span class="p">()</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-2-114" name="__codelineno-2-114" href="#__codelineno-2-114"></a>                <span class="o">+</span> <span class="s2">&quot; ; confidence: &quot;</span>
<a id="__codelineno-2-115" name="__codelineno-2-115" href="#__codelineno-2-115"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">LabelWithInstance</span><span class="p">()</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span><span class="o">.</span><span class="n">Confidence</span><span class="p">())</span>
<a id="__codelineno-2-116" name="__codelineno-2-116" href="#__codelineno-2-116"></a>            <span class="p">)</span>
<a id="__codelineno-2-117" name="__codelineno-2-117" href="#__codelineno-2-117"></a>            <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-2-118" name="__codelineno-2-118" href="#__codelineno-2-118"></a>                <span class="s2">&quot;first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): &quot;</span>
<a id="__codelineno-2-119" name="__codelineno-2-119" href="#__codelineno-2-119"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox</span><span class="p">()</span><span class="o">.</span><span class="n">CenterPoint</span><span class="p">()</span><span class="o">.</span><span class="n">X</span><span class="p">())</span>
<a id="__codelineno-2-120" name="__codelineno-2-120" href="#__codelineno-2-120"></a>                <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-2-121" name="__codelineno-2-121" href="#__codelineno-2-121"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox</span><span class="p">()</span><span class="o">.</span><span class="n">CenterPoint</span><span class="p">()</span><span class="o">.</span><span class="n">Y</span><span class="p">())</span>
<a id="__codelineno-2-122" name="__codelineno-2-122" href="#__codelineno-2-122"></a>                <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-2-123" name="__codelineno-2-123" href="#__codelineno-2-123"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox</span><span class="p">()</span><span class="o">.</span><span class="n">SpatialExtent</span><span class="p">()</span><span class="o">.</span><span class="n">X</span><span class="p">())</span>
<a id="__codelineno-2-124" name="__codelineno-2-124" href="#__codelineno-2-124"></a>                <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-2-125" name="__codelineno-2-125" href="#__codelineno-2-125"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox</span><span class="p">()</span><span class="o">.</span><span class="n">SpatialExtent</span><span class="p">()</span><span class="o">.</span><span class="n">Y</span><span class="p">())</span>
<a id="__codelineno-2-126" name="__codelineno-2-126" href="#__codelineno-2-126"></a>                <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-2-127" name="__codelineno-2-127" href="#__codelineno-2-127"></a>                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">LabelsBb</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox2dLabeled</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">BoundingBox</span><span class="p">()</span><span class="o">.</span><span class="n">Rotation</span><span class="p">())</span>
<a id="__codelineno-2-128" name="__codelineno-2-128" href="#__codelineno-2-128"></a>            <span class="p">)</span>
<a id="__codelineno-2-129" name="__codelineno-2-129" href="#__codelineno-2-129"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span><span class="p">)</span>
</code></pre></div>
<p>After sending the images, executing the query script results in the following output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>count of images: 6
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>uuidmsg: 680128d1-5a86-457e-bd7f-be1d81371a30
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>count of bounding box labels: 2
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>first label: testlabel0 ; confidence: 0.0
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>uuidmsg: 6d6a9c09-3781-4e3e-a5df-948ab821b149
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>count of bounding box labels: 2
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>first label: testlabel0 ; confidence: 0.0
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>uuidmsg: 914273f7-96d3-453e-9a30-b4b411a81afe
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>count of bounding box labels: 2
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>first label: testlabel0 ; confidence: 0.0
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>uuidmsg: ad0db9ee-d0d8-46c2-9c13-518e29d3cc2b
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>count of bounding box labels: 2
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>first label: testlabel0_ ; confidence: 0.0
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>uuidmsg: b371b172-08d2-47c7-a750-db77149af897
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>count of bounding box labels: 2
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>first label: testlabel0 ; confidence: 0.0
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>--------------------------------------------------------------------------------------------
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>uuidmsg: f1e755b2-fa6b-4cf0-a0f5-fc928be84850
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>count of bounding box labels: 2
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>first label: testlabel0 ; confidence: 0.0
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>first bounding box (Xcenter,Ycenter,Xextent,Yextent, rotation): 0.01 0.02 0.03 0.04 0.0
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>--------------------------------------------------------------------------------------------
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Source: <a href="https://github.com/agri-gaia/seerep/blob/main/examples/python/gRPC/images/gRPC_pb_queryImage.py">examples/python/gRPC/images/gRPC_pb_queryImage.py</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># NOTE: This file is referenced in the following mkdocs files:</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1">#   images.md</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># Any changes done in here will be reflected in there</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="kn">from</span> <span class="nn">google.protobuf</span> <span class="kn">import</span> <span class="n">empty_pb2</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="kn">from</span> <span class="nn">grpc</span> <span class="kn">import</span> <span class="n">Channel</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">image_pb2</span> <span class="k">as</span> <span class="n">image</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">image_service_pb2_grpc</span> <span class="k">as</span> <span class="n">imageService</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">label_pb2</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">labels_with_category_pb2</span> <span class="k">as</span> <span class="n">labels_with_category</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">meta_operations_pb2_grpc</span> <span class="k">as</span> <span class="n">metaOperations</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">point2d_pb2</span> <span class="k">as</span> <span class="n">point2d</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="kn">from</span> <span class="nn">seerep.pb</span> <span class="kn">import</span> <span class="n">query_pb2</span> <span class="k">as</span> <span class="n">query</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="kn">from</span> <span class="nn">seerep.util.common</span> <span class="kn">import</span> <span class="n">get_gRPC_channel</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="k">def</span> <span class="nf">query_images</span><span class="p">(</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>    <span class="n">target_project_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>    <span class="n">grpc_channel</span><span class="p">:</span> <span class="n">Channel</span> <span class="o">=</span> <span class="n">get_gRPC_channel</span><span class="p">(),</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">]:</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>    <span class="c1"># 1. Get gRPC service objects</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>    <span class="n">stub</span> <span class="o">=</span> <span class="n">imageService</span><span class="o">.</span><span class="n">ImageServiceStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>    <span class="n">stubMeta</span> <span class="o">=</span> <span class="n">metaOperations</span><span class="o">.</span><span class="n">MetaOperationsStub</span><span class="p">(</span><span class="n">grpc_channel</span><span class="p">)</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>    <span class="c1"># 3. Check if we have an existing test project, if not, we stop here</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>    <span class="k">if</span> <span class="n">target_project_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>        <span class="c1"># 2. Get all projects from the server</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">stubMeta</span><span class="o">.</span><span class="n">GetProjects</span><span class="p">(</span><span class="n">empty_pb2</span><span class="o">.</span><span class="n">Empty</span><span class="p">())</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>        <span class="k">for</span> <span class="n">project</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">projects</span><span class="p">:</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">project</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">project</span><span class="o">.</span><span class="n">uuid</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>            <span class="k">if</span> <span class="n">project</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;testproject&quot;</span><span class="p">:</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>                <span class="n">target_project_uuid</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">uuid</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>        <span class="k">if</span> <span class="n">target_project_uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No project with name &#39;testproject&#39; found! Execute gRPC_pb_sendLabeledImage.py beforehand!&quot;</span><span class="p">)</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>    <span class="c1"># 4. Create a query with parameters</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>    <span class="n">theQuery</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">Query</span><span class="p">()</span>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">projectuuid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_project_uuid</span><span class="p">)</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">800</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">inMapFrame</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>    <span class="n">scale</span> <span class="o">=</span> <span class="mi">150</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>    <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>        <span class="n">point2d</span><span class="o">.</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">[(</span><span class="o">-</span><span class="n">scale</span><span class="p">,</span> <span class="o">-</span><span class="n">scale</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">),</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">),</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="o">-</span><span class="n">scale</span><span class="p">)]</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>    <span class="p">]</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>    <span class="c1"># since epoche</span>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">timeinterval</span><span class="o">.</span><span class="n">time_min</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">1638549273</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">timeinterval</span><span class="o">.</span><span class="n">time_min</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">timeinterval</span><span class="o">.</span><span class="n">time_max</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="mi">1938549273</span>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">timeinterval</span><span class="o">.</span><span class="n">time_max</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a>
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>    <span class="c1"># labels</span>
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a>    <span class="n">label</span> <span class="o">=</span> <span class="n">labels_with_category</span><span class="o">.</span><span class="n">LabelsWithCategory</span><span class="p">()</span>
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a>    <span class="n">label</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>    <span class="n">labelWithConfidence0</span> <span class="o">=</span> <span class="n">label_pb2</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span>
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a>    <span class="n">labelWithConfidence0</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;testlabel0&quot;</span>
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a>    <span class="n">labelWithConfidence1</span> <span class="o">=</span> <span class="n">label_pb2</span><span class="o">.</span><span class="n">Label</span><span class="p">()</span>
<a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a>    <span class="n">labelWithConfidence1</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;testlabel0_&quot;</span>
<a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a>    <span class="n">label</span><span class="o">.</span><span class="n">labels</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">labelWithConfidence0</span><span class="p">,</span> <span class="n">labelWithConfidence1</span><span class="p">])</span>
<a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">labelsWithCategory</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
<a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a>
<a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a>    <span class="c1"># theQuery.inMapFrame = True</span>
<a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a>    <span class="n">theQuery</span><span class="o">.</span><span class="n">fullyEncapsulated</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a>
<a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a>    <span class="c1"># 5. Query the server for images matching the query and return them</span>
<a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a>    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">stub</span><span class="o">.</span><span class="n">GetImage</span><span class="p">(</span><span class="n">theQuery</span><span class="p">))</span>
<a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a>
<a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a>
<a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a>    <span class="n">queried_imgs</span> <span class="o">=</span> <span class="n">query_images</span><span class="p">()</span>
<a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;count of images </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">queried_imgs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a>    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">queried_imgs</span><span class="p">:</span>
<a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a>        <span class="nb">print</span><span class="p">(</span>
<a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a>            <span class="sa">f</span><span class="s2">&quot;uuidmsg: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">uuid_msgs</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;first label: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a>            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;first label confidence: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">labelWithInstance</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">confidence</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a>            <span class="o">+</span> <span class="s2">&quot;First bounding box (Xcenter,Ycenter,Xextent,Yextent):&quot;</span>
<a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a>            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a>            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">center_point</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a>            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a>            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">center_point</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a>            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a>            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">spatial_extent</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a>            <span class="o">+</span> <span class="s2">&quot; &quot;</span>
<a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a>            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">labels_bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox2DLabeled</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundingBox</span><span class="o">.</span><span class="n">spatial_extent</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a>        <span class="p">)</span>
</code></pre></div>
<p>After sending the images, executing the query script results in the following output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>count of images 8
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>uuidmsg: 680128d1-5a86-457e-bd7f-be1d81371a30
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>first label: testlabel0
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>first label confidence: 0.0
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>uuidmsg: 6d6a9c09-3781-4e3e-a5df-948ab821b149
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>first label: testlabel0
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>first label confidence: 0.0
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>uuidmsg: 914273f7-96d3-453e-9a30-b4b411a81afe
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>first label: testlabel0
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>first label confidence: 0.0
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>uuidmsg: ad0db9ee-d0d8-46c2-9c13-518e29d3cc2b
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>first label: testlabel0_
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>first label confidence: 0.0
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>uuidmsg: b371b172-08d2-47c7-a750-db77149af897
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>first label: testlabel0
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>first label confidence: 0.0
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>uuidmsg: b6abe511-ba53-4782-82d3-53fb80887754
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>first label: testlabel0
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>first label confidence: 0.0
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>uuidmsg: cf1d977f-5356-4edc-a02b-e4b454547f63
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>first label: testlabel0_
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>first label confidence: 0.0
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>uuidmsg: f1e755b2-fa6b-4cf0-a0f5-fc928be84850
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>first label: testlabel0
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>first label confidence: 0.0
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>First bounding box (Xcenter,Ycenter,Xextent,Yextent): 0.01 0.02 0.03 0.04
</code></pre></div>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="/seerep/mkdocs/legal-notice/index.html">Legal Notice</a> - <a href="/seerep/mkdocs/data-protection-notice/index.html">Data Protection Notice</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.sections"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>